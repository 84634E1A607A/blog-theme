((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Nlvi=e()})(this,function(){function n(t,e){(null==e||t.length<e)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e,r,n,o,i,s){try{var u=t[i](s),c=u.value}catch(t){return r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function p(u){return function(){var t=this,s=arguments;return new Promise(function(e,r){var n=u.apply(t,s);function o(t){c(n,e,r,o,i,"next",t)}function i(t){c(n,e,r,o,i,"throw",t)}o(void 0)})}}function D(t,e,r){e=u(e);var n=t,e=a()?Reflect.construct(e,r||[],u(t).constructor):e.apply(t,r);if(!e||"object"!=typeof e&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N(n.key),n)}}function s(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=((t,e)=>{for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t})(t,e);if(n)return(n=Object.getOwnPropertyDescriptor(n,e)).get?n.get.call(arguments.length<3?t:r):n.value}).apply(null,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function e(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function l(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,r;e=n,r=o[t=t],(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function m(){var d,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function n(t,e,r,n){var o,i,s,u,c,a,l,h,f,e=Object.create((e&&e.prototype instanceof b?e:b).prototype);return w(e,"_invoke",(o=t,i=r,l=n||[],h=!1,f={p:a=0,n:0,v:d,a:p,f:p.bind(d,4),d:function(t,e){return s=t,u=0,c=d,f.n=e,y}},function(t,e,r){if(1<a)throw TypeError("Generator is already running");for(h&&1===e&&p(e,r),u=e,c=r;(v=u<2?d:c)||!h;){s||(u?u<3?(1<u&&(f.n=-1),p(u,c)):f.n=c:f.v=c);try{if(a=2,s){if(v=s[t=u?t:"next"]){if(!(v=v.call(s,c)))throw TypeError("iterator result is not an object");if(!v.done)return v;c=v.value,u<2&&(u=0)}else 1===u&&(v=s.return)&&v.call(s),u<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),u=1);s=d}else if((v=(h=f.n<0)?c:o.call(i,f))!==y)break}catch(t){s=d,u=1,c=t}finally{a=1}}return{value:v,done:h}}),!0),e;function p(t,e){for(u=t,c=e,v=0;!h&&a&&!r&&v<l.length;v++){var r,n=l[v],o=f.p,i=n[2];3<t?(r=i===e)&&(c=n[(u=n[4])?5:u=3],n[4]=n[5]=d):n[0]<=o&&((r=t<2&&o<n[1])?(u=0,f.v=e,f.n=n[1]):o<i&&(r=t<3||e<n[0]||i<e)&&(n[4]=t,n[5]=e,f.n=i,u=0))}if(r||1<t)return y;throw h=!0,e}}var y={};function b(){}function o(){}function i(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(w(v={},e,function(){return this}),v),s=i.prototype=b.prototype=Object.create(t);function u(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,w(t,r,"GeneratorFunction")),t.prototype=Object.create(s),t}return w(s,"constructor",o.prototype=i),w(i,"constructor",o),w(i,r,o.displayName="GeneratorFunction"),w(s),w(s,r,"Generator"),w(s,e,function(){return this}),w(s,"toString",function(){return"[object Generator]"}),(m=function(){return{w:n,m:u}})()}function w(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}(w=function(t,e,r,n){function o(e,r){w(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(o("next",0),o("throw",1),o("return",2))})(t,e,r,n)}function q(t,e){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,s,u=[],c=!0,a=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){a=!0,o=t}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(a)throw o}}return u}})(t,e)||U(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function M(t,e,r,n){var o=i(u(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function V(t){return(t=>{if(Array.isArray(t))return n(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||U(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function N(t){t=((t,e)=>{if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);if("object"!=typeof(r=r.call(t,e||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==typeof t?t:t+""}function U(t,e){var r;if(t)return"string"==typeof t?n(t,e):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}var X=function(t,e){return(X=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}))(t,e)};function f(t,e){function r(){this.constructor=t}X(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function d(t){return"function"==typeof t}var B=!1,y={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){B=t},get useDeprecatedSynchronousErrorHandling(){return B}};function b(t){setTimeout(function(){throw t},0)}var v={closed:!0,next:function(t){},error:function(t){if(y.useDeprecatedSynchronousErrorHandling)throw t;b(t)},complete:function(){}},g=(()=>Array.isArray||function(t){return t&&"number"==typeof t.length})();function F(t){return null!==t&&"object"==typeof t}var S=(()=>{function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})(),x=(()=>{function c(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}var t;return c.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,r=this._ctorUnsubscribe,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof c)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(d(n)){r&&(this._unsubscribe=void 0);try{n.call(this)}catch(t){e=t instanceof S?G(t.errors):[t]}}if(g(o))for(var i=-1,s=o.length;++i<s;){var u=o[i];if(F(u))try{u.unsubscribe()}catch(t){e=e||[],t instanceof S?e=e.concat(G(t.errors)):e.push(t)}}if(e)throw new S(e)}},c.prototype.add=function(t){var e,r=t;if(!t)return c.EMPTY;switch(typeof t){case"function":r=new c(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;r instanceof c||(e=r,(r=new c)._subscriptions=[e]);break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=r._parentOrParents;if(null===n)r._parentOrParents=this;else if(n instanceof c){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}n=this._subscriptions;return null===n?this._subscriptions=[r]:n.push(r),r},c.prototype.remove=function(t){var e=this._subscriptions;e&&-1!==(t=e.indexOf(t))&&e.splice(t,1)},c.EMPTY=((t=new c).closed=!0,t),c})();function G(t){return t.reduce(function(t,e){return t.concat(e instanceof S?e.errors:e)},[])}var _=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())(),T=(o=>{function i(t,e,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=v;break;case 1:if(!t){n.destination=v;break}if("object"==typeof t){t instanceof i?(n.syncErrorThrowable=t.syncErrorThrowable,(n.destination=t).add(n)):(n.syncErrorThrowable=!0,n.destination=new z(n,t));break}default:n.syncErrorThrowable=!0,n.destination=new z(n,t,e,r)}return n}return f(i,o),i.prototype[_]=function(){return this},i.create=function(t,e,r){t=new i(t,e,r);return t.syncErrorThrowable=!1,t},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},i})(x),z=(s=>{function t(t,e,r,n){var o,i=s.call(this)||this,t=(i._parentSubscriber=t,i);return d(e)?o=e:e&&(o=e.next,r=e.error,n=e.complete,e!==v)&&(d((t=Object.create(e)).unsubscribe)&&i.add(t.unsubscribe.bind(t)),t.unsubscribe=i.unsubscribe.bind(i)),i._context=t,i._next=o,i._error=r,i._complete=n,i}return f(t,s),t.prototype.next=function(t){var e;!this.isStopped&&this._next&&(e=this._parentSubscriber,y.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t))},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=y.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):b(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;b(t)}}},t.prototype.complete=function(){var t,e,r=this;this.isStopped||(t=this._parentSubscriber,this._complete&&(e=function(){return r._complete.call(r._context)},y.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,e):this.__tryOrUnsub(e)),this.unsubscribe())},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),y.useDeprecatedSynchronousErrorHandling)throw t;b(t)}},t.prototype.__tryOrSetError=function(e,t,r){if(!y.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return y.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(b(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t})(T);var C=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function W(t){return t}var E=(()=>{function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,t=((t,e,r)=>{if(t){if(t instanceof T)return t;if(t[_])return t[_]()}return t||e||r?new T(t,e,r):new T(v)})(t,e,r);if(t.add(n?n.call(t,this.source):this.source||y.useDeprecatedSynchronousErrorHandling&&!t.syncErrorThrowable?this._subscribe(t):this._trySubscribe(t)),y.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable&&(t.syncErrorThrowable=!1,t.syncErrorThrown))throw t.syncErrorValue;return t},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){y.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),(t=>{for(;t;){var e=t,r=e.destination;if(e.closed||e.isStopped)return;t=r&&r instanceof T?r:null}return 1})(e)?e.error(t):console.warn(t)}},r.prototype.forEach=function(n,t){var o=this;return new(t=Y(t))(function(t,e){var r=o.subscribe(function(t){try{n(t)}catch(t){e(t),r&&r.unsubscribe()}},e,t)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[C]=function(){return this},r.prototype.pipe=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:(0===(e=t).length?W:1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)})(this)},r.prototype.toPromise=function(t){var n=this;return new(t=Y(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r})();function Y(t){if(t=t||Promise)return t;throw new Error("no Promise impl found")}var t=(n=>{function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r.pending=!1,r}return f(t,n),t.prototype.schedule=function(t,e){var r;return void 0===e&&(e=0),this.closed||(this.state=t,t=this.scheduler,null!=(r=this.id)&&(this.id=this.recycleAsyncId(t,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(t,this.id,e)),this},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},t.prototype.recycleAsyncId=function(t,e,r){if(null!==(r=void 0===r?0:r)&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;t=this._execute(t,e);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t})((r=>{function t(t,e){return r.call(this)||this}return f(t,r),t.prototype.schedule=function(t,e){return this},t})(x)),J=(()=>{function r(t,e){void 0===e&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},r.now=function(){return Date.now()},r})(),K=function(n){return function(t){for(var e=0,r=n.length;e<r&&!t.closed;e++)t.next(n[e]);t.complete()}};function Q(n,o){return new E(function(t){var e=new x,r=0;return e.add(o.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||e.add(this.schedule()))})),e})}var Z=new((n=>{function o(t,e){void 0===e&&(e=J.now);var r=n.call(this,t,function(){return o.delegate&&o.delegate!==r?o.delegate.now():e()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return f(o,n),o.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),o.delegate&&o.delegate!==this?o.delegate.schedule(t,e,r):n.prototype.schedule.call(this,t,e,r)},o.prototype.flush=function(t){var e,r=this.actions;if(this.active)r.push(t);else{this.active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=r.shift());if(this.active=!1,e){for(;t=r.shift();)t.unsubscribe();throw e}}},o})(J))(t);function O(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new tt(e,r))}}var tt=(()=>{function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.project,this.thisArg))},t})(),et=(n=>{function t(t,e,r){t=n.call(this,t)||this;return t.project=e,t.count=0,t.thisArg=r||t,t}return f(t,n),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t})(T),t=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e})(T),rt=(o=>{function t(t,e,r){var n=o.call(this)||this;return n.parent=t,n.outerValue=e,n.outerIndex=r,n.index=0,n}return f(t,o),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t})(T),nt=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,b),e}};function ot(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var k=ot(),it=function(n){return function(e){for(var t=n[k]();;){var r=void 0;try{r=t.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}},st=function(r){return function(t){var e=r[C]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},ut=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function ct(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var j=function(t){if(t&&"function"==typeof t[C])return st(t);if(ut(t))return K(t);if(ct(t))return nt(t);if(t&&"function"==typeof t[k])return it(t);throw t=F(t)?"an invalid object":"'"+t+"'",new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function at(t,e){if(null!=t){if((c=t)&&"function"==typeof c[C])return s=t,u=e,new E(function(e){var r=new x;return r.add(u.schedule(function(){var t=s[C]();r.add(t.subscribe({next:function(t){r.add(u.schedule(function(){return e.next(t)}))},error:function(t){r.add(u.schedule(function(){return e.error(t)}))},complete:function(){r.add(u.schedule(function(){return e.complete()}))}}))})),r});if(ct(t))return n=t,o=e,new E(function(e){var r=new x;return r.add(o.schedule(function(){return n.then(function(t){r.add(o.schedule(function(){e.next(t),r.add(o.schedule(function(){return e.complete()}))}))},function(t){r.add(o.schedule(function(){return e.error(t)}))})})),r});if(ut(t))return Q(t,e);if((c=t)&&"function"==typeof c[k]||"string"==typeof t){var r=t,i=e;if(r)return new E(function(n){var o,t=new x;return t.add(function(){o&&"function"==typeof o.return&&o.return()}),t.add(i.schedule(function(){o=r[k](),t.add(i.schedule(function(){if(!n.closed){try{var t=o.next(),e=t.value,r=t.done}catch(t){return void n.error(t)}r?n.complete():(n.next(e),this.schedule())}}))})),t});throw new Error("Iterable cannot be null")}}var n,o,s,u,c;throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function lt(t,e){return e?at(t,e):t instanceof E?t:new E(j(t))}var ht=(r=>{function t(t){var e=r.call(this)||this;return e.parent=t,e}return f(t,r),t.prototype._next=function(t){this.parent.notifyNext(t)},t.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t})(T),P=(t=>{function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e})(T);function ft(t,e){if(!e.closed){if(t instanceof E)return t.subscribe(e);var r;try{r=j(t)(e)}catch(t){e.error(t)}return r}}function I(t,r,n,e){return d(n)&&(e=n,n=void 0),e?I(t,r,n).pipe(O(function(t){return g(t)?e.apply(void 0,t):e(t)})):new E(function(e){!function t(e,r,n,o,i){var s;if(yt(e)){var u=e;e.addEventListener(r,n,i),s=function(){return u.removeEventListener(r,n,i)}}else if(dt(e)){var c=e;e.on(r,n),s=function(){return c.off(r,n)}}else if(pt(e)){var a=e;e.addListener(r,n),s=function(){return a.removeListener(r,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],r,n,o,i)}o.add(s)}(t,r,function(t){e.next(1<arguments.length?Array.prototype.slice.call(arguments):t)},e,n)})}function pt(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function dt(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}function yt(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}function bt(e,r){return function(t){return t.lift(new vt(e,r))}}var vt=(()=>{function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new mt(t,this.predicate,this.thisArg))},t})(),mt=(n=>{function t(t,e,r){t=n.call(this,t)||this;return t.predicate=e,t.thisArg=r,t.count=0,t}return f(t,n),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t})(T);function wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,n,o=t[t.length-1];return"function"==typeof o&&t.pop(),r=t,((n=void 0)?Q(r,n):new E(K(r))).lift(new gt(o))}var gt=(()=>{function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.resultSelector))},t})(),St=(n=>{function t(t,e,r){t=n.call(this,t)||this;return t.resultSelector=e,t.iterators=[],t.active=0,t.resultSelector="function"==typeof e?e:void 0,t}return f(t,n),t.prototype._next=function(t){var e=this.iterators;g(t)?e.push(new _t(t)):e.push("function"==typeof t[k]?new xt(t[k]()):new Tt(this.destination,this,t))},t.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0===e)this.destination.complete();else{this.active=e;for(var r=0;r<e;r++){var n=t[r];n.stillUnsubscribed?this.destination.add(n.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++)if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return;for(var o=!1,i=[],n=0;n<e;n++){var s,u=(s=t[n]).next();if(s.hasCompleted()&&(o=!0),u.done)return void r.complete();i.push(u.value)}this.resultSelector?this._tryresultSelector(i):r.next(i),o&&r.complete()},t.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t})(T),xt=(()=>{function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return Boolean(t&&t.done)},t})(),_t=(()=>{function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[k]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.index<this.array.length},t.prototype.hasCompleted=function(){return this.array.length===this.index},t})(),Tt=(n=>{function t(t,e,r){t=n.call(this,t)||this;return t.parent=e,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}return f(t,n),t.prototype[k]=function(){return this},t.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(){return ft(this.observable,new ht(this))},t})(P);var Ct=(()=>{function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Et(t,this.dueTime,this.scheduler))},t})(),Et=(n=>{function t(t,e,r){t=n.call(this,t)||this;return t.dueTime=e,t.scheduler=r,t.debouncedSubscription=null,t.lastValue=null,t.hasValue=!1,t}return f(t,n),t.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ot,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){var t;this.clearDebounce(),this.hasValue&&(t=this.lastValue,this.lastValue=null,this.hasValue=!1,this.destination.next(t))},t.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},t})(T);function Ot(t){t.debouncedNext()}function A(e,o){return"function"==typeof o?function(t){return t.pipe(A(function(r,n){return lt(e(r,n)).pipe(O(function(t,e){return o(r,t,n,e)}))}))}:function(t){return t.lift(new kt(e))}}var kt=(()=>{function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new jt(t,this.project))},t})(),jt=(r=>{function t(t,e){t=r.call(this,t)||this;return t.project=e,t.index=0,t}return f(t,r),t.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e)},t.prototype._innerSub=function(t){var e=this.innerSubscription,e=(e&&e.unsubscribe(),new ht(this)),r=this.destination;r.add(e),this.innerSubscription=ft(t,e),this.innerSubscription!==e&&r.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||r.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&r.prototype._complete.call(this)},t.prototype.notifyNext=function(t){this.destination.next(t)},t})(P),Pt={leading:!0,trailing:!1};var It=(()=>{function t(t,e,r,n){this.duration=t,this.scheduler=e,this.leading=r,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new At(t,this.duration,this.scheduler,this.leading,this.trailing))},t})(),At=(i=>{function t(t,e,r,n,o){t=i.call(this,t)||this;return t.duration=e,t.scheduler=r,t.leading=n,t.trailing=o,t._hasTrailingValue=!1,t._trailingValue=null,t}return f(t,i),t.prototype._next=function(t){!this.throttled&&(this.add(this.throttled=this.scheduler.schedule($t,this.duration,{subscriber:this})),this.leading)?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0)},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},t})(T);function $t(t){t.subscriber.clearThrottle()}var Rt=(()=>{function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new Lt(t,this.observables,this.project))},t})(),Lt=(s=>{function t(t,e,r){var n=s.call(this,t)||this,o=(n.observables=e,n.project=r,n.toRespond=[],e.length);n.values=new Array(o);for(var i=0;i<o;i++)n.toRespond.push(i);for(i=0;i<o;i++)n.add(((t,e,r,n,o)=>{if(!(o=void 0===o?new rt(t,r,n):o).closed)return e instanceof E?e.subscribe(o):j(e)(o)})(n,e[i],void 0,i));return n}return f(t,s),t.prototype.notifyNext=function(t,e,r){this.values[r]=e;e=this.toRespond;0<e.length&&-1!==(r=e.indexOf(r))&&e.splice(r,1)},t.prototype.notifyComplete=function(){},t.prototype._next=function(t){0===this.toRespond.length&&(t=[t].concat(this.values),this.project?this._tryProject(t):this.destination.next(t))},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t})(t),P="undefined"!=typeof window&&window,t="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht="undefined"!=typeof global&&global,R=P||Ht||t;function Dt(t,e){return new L({method:"GET",url:t,headers:e=void 0===e?null:e})}function qt(t,e,r){return new L({method:"POST",url:t,body:e,headers:r})}function Mt(t,e){return new L({method:"DELETE",url:t,headers:e})}function Vt(t,e,r){return new L({method:"PUT",url:t,body:e,headers:r})}function Nt(t,e,r){return new L({method:"PATCH",url:t,body:e,headers:r})}var Ut=O(function(t,e){return t.response});function Xt(t,e){return Ut(new L({method:"GET",url:t,responseType:"json",headers:e}))}var L=(o=>{function e(t){var e=o.call(this)||this,r={async:!0,createXHR:function(){return(this.crossDomain?()=>{if(R.XMLHttpRequest)return new R.XMLHttpRequest;if(R.XDomainRequest)return new R.XDomainRequest;throw new Error("CORS is not supported by your browser")}:()=>{if(R.XMLHttpRequest)return new R.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(new R.ActiveXObject(t=e[r]))break}catch(t){}return new R.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}})()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return e.request=r,e}function t(t){return new e(t)}return f(e,o),e.prototype._subscribe=function(t){return new Bt(t,this.request)},e.create=(t.get=Dt,t.post=qt,t.delete=Mt,t.put=Vt,t.patch=Nt,t.getJSON=Xt,t),e})(E),Bt=(n=>{function t(t,e){var t=n.call(this,t)||this,r=(t.request=e,t.done=!1,e.headers=e.headers||{});return e.crossDomain||t.getHeader(r,"X-Requested-With")||(r["X-Requested-With"]="XMLHttpRequest"),t.getHeader(r,"Content-Type")||R.FormData&&e.body instanceof R.FormData||void 0===e.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),e.body=t.serializeBody(e.body,t.getHeader(e.headers,"Content-Type")),t.send(),t}return f(t,n),t.prototype.next=function(t){this.done=!0;var e,r=this.xhr,n=this.request,o=this.destination;try{e=new Ft(t,r,n)}catch(t){return o.error(t)}o.next(e)},t.prototype.send=function(){var t=this.request,e=this.request,r=e.user,n=e.method,o=e.url,i=e.async,s=e.password,u=e.headers,e=e.body;try{var c=this.xhr=t.createXHR();this.setupEvents(c,t),r?c.open(n,o,i,r,s):c.open(n,o,i),i&&(c.timeout=t.timeout,c.responseType=t.responseType),"withCredentials"in c&&(c.withCredentials=!!t.withCredentials),this.setHeaders(c,u),e?c.send(e):c.send()}catch(t){this.error(t)}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(R.FormData&&e instanceof R.FormData)return e;var r;switch(t=t&&-1!==(r=t.indexOf(";"))?t.substring(0,r):t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setRequestHeader(r,e[r])},t.prototype.getHeader=function(t,e){for(var r in t)if(r.toLowerCase()===e.toLowerCase())return t[r]},t.prototype.setupEvents=function(t,e){var r,i,n=e.progressSubscriber;function s(t){var e,r=s.subscriber,n=s.progressSubscriber,o=s.request;n&&n.error(t);try{e=new zt(this,o)}catch(t){e=t}r.error(e)}function o(t){}function u(t){var e=u.subscriber,r=u.progressSubscriber,n=u.request;if(4===this.readyState){var o=1223===this.status?204:this.status;if((o=0===o?("text"===this.responseType?this.response||this.responseText:this.response)?200:0:o)<400)r&&r.complete(),e.next(t),e.complete();else{r&&r.error(t);r=void 0;try{r=new H("ajax error "+o,this,n)}catch(t){r=t}e.error(r)}}}(t.ontimeout=s).request=e,s.subscriber=this,s.progressSubscriber=n,t.upload&&"withCredentials"in t&&(n&&(r=function(t){r.progressSubscriber.next(t)},R.XDomainRequest?t.onprogress=r:t.upload.onprogress=r,r.progressSubscriber=n),(t.onerror=i=function(t){var e,r=i.progressSubscriber,n=i.subscriber,o=i.request;r&&r.error(t);try{e=new H("ajax error",this,o)}catch(t){e=t}n.error(e)}).request=e,i.subscriber=this,i.progressSubscriber=n),(t.onreadystatechange=o).subscriber=this,o.progressSubscriber=n,o.request=e,(t.onload=u).subscriber=this,u.progressSubscriber=n,u.request=e},t.prototype.unsubscribe=function(){var t=this.xhr;!this.done&&t&&4!==t.readyState&&"function"==typeof t.abort&&t.abort(),n.prototype.unsubscribe.call(this)},t})(T),Ft=(()=>function(t,e,r){this.originalEvent=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=Gt(this.responseType,e)})(),H=(()=>{function t(t,e,r){return Error.call(this),this.message=t,this.name="AjaxError",this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=Gt(this.responseType,e),this}return t.prototype=Object.create(Error.prototype),t})();function Gt(t,e){switch(t){case"json":return"response"in(r=e)?r.responseType?r.response:JSON.parse(r.response||r.responseText||"null"):JSON.parse(r.responseText||"null");case"xml":return e.responseXML;default:return"response"in e?e.response:e.responseText}var r}var zt=function(t,e){return H.call(this,"ajax timeout",t,e),this.name="AjaxTimeoutError",this},Wt=(()=>L.create)();function Yt(t,e){var r,n,t=Wt({url:t,responseType:"xml"}).pipe(O(function(t){return t.response}),O(function(t){return t.querySelectorAll("entry")}),O(function(t){return V(t).map(function(t){return{title:t.getElementsByTagName("title")[0].textContent,url:t.getElementsByTagName("url")[0].textContent,content:t.getElementsByTagName("content")[0].textContent}})})),e=I(document.getElementById(e),"input").pipe((r=500,void 0===n&&(n=Z),function(t){return t.lift(new Ct(r,n))}),O(function(t){return t.target.value.trim()}));return wt(e.pipe(O(function(t){return!!t})),e.pipe(function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(t){var e;return"function"==typeof r[r.length-1]&&(e=r.pop()),t.lift(new Rt(r,e))}}(t),O(function(t){var t=h(t,2),i=t[0];return t[1].filter(function(t){var e=t.title,t=t.content;return 0<=e.indexOf(i)||0<=t.indexOf(i)}).map(function(t){var e=new RegExp("(".concat(i,")"),"gi"),r=t.title.replace(e,'<strong class="search-keyword">$1</strong>'),n=(o=t.content.replace(/<[^>]+>/g,"")).indexOf(i),o=o.slice(n<20?0:n-20,n<0?100:n+80).replace(e,'<strong class="search-keyword">$1</strong>');return l(l({},t),{},{title:r,content:o})})}))).pipe(O(function(t){t=h(t,2);return t[0]?t[1]:[]}))}var Jt=(()=>{function f(t){r(this,f),this.config=t,this.theme=t.theme,this.scrollArr=[]}return s(f,[{key:"animate",value:function(t,e,r){var n=$(t);n.addClass(e).one("webkitAnimationEnd AnimationEnd",function(){n.removeClass(e),r&&r()})}},{key:"init",value:function(){this.smoothScroll(),this.setupPictures(),this.showComments(),f.opScroll(this.scrollArr)}},{key:"smoothScroll",value:function(){$(".toc-link").on("click",function(e){e.preventDefault();var r=$.attr(this,"href");try{var t=decodeURIComponent(r.substring(1)),n=document.getElementById(t);n&&$("html, body").animate({scrollTop:$(n).offset().top-200})}catch(t){try{var o=$(r);o.length&&$("html, body").animate({scrollTop:o.offset().top-200})}catch(e){console.warn("Failed to scroll to target:",r)}}})}},{key:"setupPictures",value:function(){var i=this;$(".post-content").each(function(t,e){$(e).find("img").each(function(t,e){var r=$(e),n=e.src,o=e.alt||"",e=e.className||"";r.parent("p").css("text-align","center"),i.theme.lazy&&r.attr("data-src",n).removeAttr("src").addClass("lazyload"),r.wrap($("<a>").attr({href:n,"data-title":o,"data-lightbox":"group"}).addClass(e))})})}},{key:"showComments",value:function(){var t=this,e=$("#post-comments"),r=$("#com-switch");e.length&&r.length&&(r.off("click.comments"),r.on("click.comments",function(){"none"===e.css("display")?(e.css("display","block").addClass("syuanpi fadeInDown"),r.css("transform","rotate(180deg)")):(r.addClass("syuanpi").css("transform",""),e.removeClass("fadeInDown"),t.animate("#post-comments","fadeOutUp",function(){e.css("display","none")}))}))}},{key:"back2top",value:function(){var t=$(".toTop");t.length&&(t.off("click.back2top"),t.on("click.back2top",function(){$("html, body").animate({scrollTop:0})}))}},{key:"pushHeader",value:function(){var e=$("#mobile-header");this.scrollArr.push(function(t){e.toggleClass("header-scroll",5<t)})}},{key:"updateRound",value:function(t){var e=$(document).height()-$(window).height(),t=Math.floor(t/e*100);$("#scrollpercent").html(t)}},{key:"showToc",value:function(){var o=$(".toc-link"),t=$(".headerlink");this.scrollArr.push(function(r){var n=t.map(function(t,e){return $(e).offset().top}).get();$(".title-link a").toggleClass("active",0<=r&&r<230),o.each(function(t,e){t=n[t]<r+210&&r+210<=(t+1===o.length?1/0:n[t+1]);$(e).toggleClass("active",t)})})}},{key:"titleStatus",value:function(){var e,r=document.title;document.addEventListener("visibilitychange",function(){var t=$(document).height()-$(window).height(),t=0==t?100:Math.floor($(window).scrollTop()/t*100);document.hidden?(clearTimeout(e),document.title="Read ".concat(t,"% · ").concat(r)):(document.title="Welcome Back · ".concat(r),e=setTimeout(function(){document.title=r},3e3))})}},{key:"showReward",value:function(){var t,e,r=this;this.theme.reward&&(t=$("#reward-wrapper"),e=$("#reward-btn"),t.length)&&e.length&&(e.off("click.reward"),e.on("click.reward",function(){"none"===t.css("display")?(t.css("display","flex"),r.animate("#reward-btn","clarity")):r.animate("#reward-btn","melt",function(){t.hide()})}))}},{key:"listenExit",value:function(t,e){t&&I(t,"keydown").pipe(bt(function(t){return 27===t.keyCode})).subscribe(function(){return e()})}},{key:"depth",value:function(t,e){var r=$("body"),n=$(".container-inner");(r.hasClass("under")?(r.removeClass("under"),n.removeClass("under"),e):(r.addClass("under"),n.addClass("under"),t)).call(this)}},{key:"tagcloud",value:function(){function t(){e.depth(function(){return n.addClass("syuanpi shuttleIn show")},i)}var e=this,r=$("#tags"),n=$("#tagcloud"),o=$("#search"),i=function(){n.removeClass("shuttleIn"),e.animate("#tagcloud","zoomOut",function(){n.removeClass("syuanpi show")})},r=(this.listenExit(r[0],t),this.listenExit(document.getElementsByClassName("tagcloud-taglist"),t),r.on("click",function(){o.hasClass("show")?(n.addClass("syuanpi shuttleIn show"),o.removeClass("shuttleIn"),e.animate("#search","zoomOut",function(){o.removeClass("syuanpi show")})):t()}),$("#tagcloud").on("click",function(t){t.stopPropagation(),"DIV"===t.target.tagName&&e.depth(function(){return n.addClass("syuanpi shuttleIn show")},i)}),I(document.querySelectorAll(".tagcloud-tag button"),"click").pipe(O(function(t){return t.target}))),s=lt(document.querySelectorAll(".tagcloud-postlist")),u=s.pipe(O(function(t){return t.classList.remove("active")}));wt(r.pipe(A(function(){return u})),r).pipe(O(function(t){t=h(t,2);return t[1]}),A(function(e){return s.pipe(bt(function(t){return t.firstElementChild.innerHTML.trim()===e.innerHTML.trim()}))})).subscribe(function(t){return t.classList.add("active")})}},{key:"search",value:function(){var t,e,r,n,o,i,s,u=this;this.theme.search&&(window.markedLoaded||($("body").append('<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"><\/script>'),window.markedLoaded=!0),t=$("#search-btn"),e=$("#search-result"),r=$("#search"),n=$("#tagcloud"),r.length)&&(o=function(){r.removeClass("shuttleIn"),u.animate("#search","zoomOut",function(){r.removeClass("syuanpi show")})},i=function(){u.depth(function(){return r.addClass("syuanpi shuttleIn show")},o)},(s=document.getElementById("search"))&&this.listenExit(s,i),t.off("click.search"),t.on("click.search",function(){n.hasClass("show")?(r.addClass("syuanpi shuttleIn show"),n.removeClass("shuttleIn"),u.animate("#tagcloud","zoomOut",function(){n.removeClass("syuanpi show")})):i()}),$("#search").off("click.search"),$("#search").on("click.search",function(t){t.stopPropagation(),"DIV"===t.target.tagName&&u.depth(function(){return r.addClass("syuanpi shuttleIn show")},o)}),Yt("".concat(this.config.baseUrl,"search.xml"),"search-input").subscribe(function(t){var t=t.map(function(t){var e=t.title,r=t.content;return'\n          <li class="search-result-item">\n            <a href="'.concat(t.url,'"><h2>').concat(e,"</h2></a>\n            <p>").concat(r,"</p>\n          </li>\n        ")});e.html((t=t.join(""),'<ul class="search-result-list syuanpi fadeInUpShort">'.concat(t,"</ul>")))}))}},{key:"headerMenu",value:function(){var t=this,e=$(".mobile-header-body"),r=$(".header-menu-line"),n=$("#mobile-tags"),o=$("#tagcloud");n.on("click",function(){e.removeClass("show"),r.removeClass("show"),o.addClass("syuanpi shuttleIn show")}),$("#mobile-left").on("click",function(){t.depth(function(){e.addClass("show"),r.addClass("show")},function(){e.removeClass("show"),r.removeClass("show")})})}},{key:"navigation",value:function(){var c,a,l,h;this.theme.pjax&&(c=$(".container-inner"),a=$(".header"),l=$(".header-wrapper"),h=this,window.navigation?window.navigation.addEventListener("navigate",function(t){var o=new URL(t.destination.url);location.origin!==o.origin||t.downloadRequest||t.formData||!t.canIntercept||t.sourceElement&&!$(t.sourceElement).closest(".container-inner").length||t.intercept({handler:function(){return p(m().m(function t(){var e,r,n;return m().w(function(t){for(;;)switch(t.n){case 0:return c.addClass("syuanpi fadeOutLeftShort"),l.addClass("syuanpi fadeOutLeftShort"),a.addClass("melt"),t.n=1,new Promise(function(t){return setTimeout(t,300)});case 1:return t.n=2,fetch(o.pathname);case 2:return e=t.v,t.n=3,e.text();case 3:e=t.v,n=new DOMParser,r=n.parseFromString(e,"text/html"),(n=r.querySelector(".container-inner"))&&(c.html(n.innerHTML),c.attr("class",n.className),c.removeClass("fadeOutLeftShort").addClass("fadeInRightShort"),l.removeClass("fadeOutLeftShort").addClass("fadeInRightShort"),a.removeClass("melt"),setTimeout(p(m().m(function t(){return m().w(function(t){for(;;)switch(t.n){case 0:if(c.removeClass("fadeInRightShort"),l.removeClass("fadeInRightShort"),h.scrollArr=[],h.smoothScroll(),h.setupPictures(),h.showComments(),h.showReward(),h.showToc(),h.pushHeader(),f.opScroll(h.scrollArr),window.renderMermaids)return t.n=1,window.renderMermaids();t.n=1;break;case 1:document.title=r.title,window.scrollTo(0,0);case 2:return t.a(2)}},t)})),300));case 4:return t.a(2)}},t)}))()}})}):(console.info("Navigation API not supported, using History API fallback"),$(document).on("click",".container-inner a",(()=>{var e=p(m().m(function t(e){var r,n,o,i,s,u;return m().w(function(t){for(;;)switch(t.p=t.n){case 0:if(o=$(e.currentTarget),!(r=o.attr("href"))||r.startsWith("#")||r.startsWith("javascript:")||r.startsWith("mailto:")||"_blank"===o.attr("target"))return t.a(2);t.n=1;break;case 1:if(t.p=1,(n=new URL(r,window.location.origin)).origin!==window.location.origin)return t.a(2);t.n=2;break;case 2:return e.preventDefault(),c.addClass("syuanpi fadeOutLeftShort"),l.addClass("syuanpi fadeOutLeftShort"),a.addClass("melt"),t.n=3,new Promise(function(t){return setTimeout(t,300)});case 3:return t.n=4,fetch(n.href);case 4:return o=t.v,t.n=5,o.text();case 5:i=t.v,u=new DOMParser,s=u.parseFromString(i,"text/html"),(u=s.querySelector(".container-inner"))&&(c.html(u.innerHTML),c.attr("class",u.className),window.history.pushState({path:n.href},"",n.href),c.removeClass("fadeOutLeftShort").addClass("fadeInRightShort"),l.removeClass("fadeOutLeftShort").addClass("fadeInRightShort"),a.removeClass("melt"),setTimeout(p(m().m(function t(){return m().w(function(t){for(;;)switch(t.n){case 0:if(c.removeClass("fadeInRightShort"),l.removeClass("fadeInRightShort"),h.scrollArr=[],h.smoothScroll(),h.setupPictures(),h.showComments(),h.showReward(),h.showToc(),h.pushHeader(),f.opScroll(h.scrollArr),window.renderMermaids)return t.n=1,window.renderMermaids();t.n=1;break;case 1:document.title=s.title,window.scrollTo(0,0);case 2:return t.a(2)}},t)})),300)),t.n=7;break;case 6:t.p=6,console.error("Navigation failed:",t.v),window.location.href=r;case 7:return t.a(2)}},t,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}})()),window.addEventListener("popstate",(()=>{var e=p(m().m(function t(e){var r,n,o;return m().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,c.addClass("syuanpi fadeOutLeftShort"),l.addClass("syuanpi fadeOutLeftShort"),a.addClass("melt"),t.n=1,new Promise(function(t){return setTimeout(t,300)});case 1:return t.n=2,fetch(window.location.href);case 2:return r=t.v,t.n=3,r.text();case 3:r=t.v,o=new DOMParser,n=o.parseFromString(r,"text/html"),(o=n.querySelector(".container-inner"))&&(c.html(o.innerHTML),c.attr("class",o.className),c.removeClass("fadeOutLeftShort").addClass("fadeInRightShort"),l.removeClass("fadeOutLeftShort").addClass("fadeInRightShort"),a.removeClass("melt"),setTimeout(p(m().m(function t(){return m().w(function(t){for(;;)switch(t.n){case 0:if(c.removeClass("fadeInRightShort"),l.removeClass("fadeInRightShort"),h.scrollArr=[],h.smoothScroll(),h.setupPictures(),h.showComments(),h.showReward(),h.showToc(),h.pushHeader(),f.opScroll(h.scrollArr),window.renderMermaids)return t.n=1,window.renderMermaids();t.n=1;break;case 1:document.title=n.title,window.scrollTo(0,0);case 2:return t.a(2)}},t)})),300)),t.n=5;break;case 4:t.p=4,console.error("Popstate navigation failed:",t.v),window.location.reload();case 5:return t.a(2)}},t,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}})())))}},{key:"bootstarp",value:function(){this.showToc(),this.back2top(),this.titleStatus(),this.init(),this.pushHeader(),this.tagcloud(),this.search(),this.showReward(),this.headerMenu(),this.navigation()}}],[{key:"opScroll",value:function(t){t.length&&I(window,"scroll").pipe(O(function(t){return t.target.scrollingElement.scrollTop})).subscribe(function(e){return t.forEach(function(t){return t(e)})})}}])})();return(()=>{function i(t){return r(this,i),D(this,i,[t])}var t=i,e=Jt;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e),s(i,[{key:"pushHeader",value:function(){var e,r,n,o;M(i,"pushHeader",this,3)([]),"banderole"===this.theme.scheme&&(e=$("#header"),I(window,"wheel").pipe((r=500,void 0===n&&(n=Z),void 0===o&&(o=Pt),function(t){return t.lift(new It(r,n,o.leading,o.trailing))}),O(function(t){return 0<t.deltaY})).subscribe(function(t){return e.toggleClass("header-hide",t)}),this.scrollArr.push(function(t){e.toggleClass("header-scroll",50<t)}))}},{key:"back2top",value:function(){var e=this,r=$("#backtop");this.scrollArr.push(function(t){110<t?r.addClass("clarity").removeClass("melt"):r.addClass("melt").removeClass("clarity"),e.updateRound(t)}),M(i,"back2top",this,3)([])}}])})()});
